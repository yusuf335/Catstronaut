{"version":3,"file":"index-6241ea02.js","sources":["src/AbstractTooltip/abstractTooltip/TippyStyles.tsx","src/AbstractTooltip/abstractTooltip/matchTriggerWidth.ts","src/AbstractTooltip/index.tsx"],"sourcesContent":["import \"../../../node_modules/tippy.js/dist/tippy.css\";\nimport React from \"react\";\nimport { base } from \"../../typography\";\nimport { colors } from \"../../colors\";\nimport { Global, css } from \"@emotion/core\";\nimport { SingletonComponent } from \"../../shared/components/SingletonComponent\";\n\nexport const TippyStyles: React.FC = () => (\n  <SingletonComponent identity=\"src/AbstractTooltip/abstractTooltip/TippyStyles.tsx\">\n    {React.useMemo(\n      () => (\n        <Global\n          styles={css({\n            \".tippy-box\": {\n              \"&[data-theme=space-kit]\": {\n                ...base.small,\n                backgroundColor: colors.black.base,\n                opacity: 0.95,\n\n                '&[data-placement^=\"top\"] > .tippy-arrow': {\n                  borderTopColor: colors.black.base,\n                },\n                '&[data-placement^=\"bottom\"] > .tippy-arrow': {\n                  borderBottomColor: colors.black.base,\n                },\n                '&[data-placement^=\"right\"] > .tippy-arrow': {\n                  borderRightColor: colors.black.base,\n                },\n                '&[data-placement^=\"left\"] > .tippy-arrow': {\n                  borderLeftColor: colors.black.base,\n                },\n\n                \".tippy-content\": {\n                  padding: \"4px 8px\",\n                },\n\n                \"&.space-kit-relaxed .tippy-content\": {\n                  padding: \"8px 12px\",\n                },\n              },\n            },\n          })}\n        />\n      ),\n      [],\n    )}\n  </SingletonComponent>\n);\n","import { Modifier } from \"@popperjs/core\";\n\nexport const matchTriggerWidth: Modifier<\"matchTriggerWidth\", unknown> = {\n  name: \"matchTriggerWidth\",\n  enabled: true,\n  phase: \"beforeWrite\",\n  requires: [\"computeStyles\"],\n  requiresIfExists: [\"flip\", \"maxSize\"],\n  fn: ({ state }) => {\n    state.styles.popper.width = `${state.rects.reference.width}px`;\n  },\n  effect: ({ state }) => {\n    state.elements.popper.style.width = `${\n      (state.elements.reference as HTMLElement).offsetWidth\n    }px`;\n    const tippyBox = state.elements.popper.querySelector<HTMLElement>(\n      \".tippy-box\",\n    );\n    if (tippyBox) {\n      tippyBox.style.minWidth = \"0\";\n    }\n  },\n};\n","import \"../../node_modules/tippy.js/animations/shift-away.css\";\nimport React from \"react\";\nimport Tippy from \"@tippyjs/react\";\nimport { Placement } from \"tippy.js\";\nimport { TippyStyles } from \"./abstractTooltip/TippyStyles\";\nimport { useSpaceKitProvider } from \"../SpaceKitProvider\";\nimport { matchTriggerWidth as matchTriggerWidthModifier } from \"./abstractTooltip/matchTriggerWidth\";\nimport classnames from \"classnames\";\n\ntype TippyProps = React.ComponentProps<typeof Tippy>;\n\nexport interface AbstractTooltipProps {\n  /**\n   * Fallback placements to use if the default placement clips the content.\n   *\n   * @see https://popper.js.org/docs/v2/modifiers/flip/#fallbackplacements\n   */\n  fallbackPlacements?: readonly Placement[];\n\n  /**\n   * Force the tooltip to be visible. Only use this for testing purposes; don't\n   * use this to programatically control the component\n   */\n  forceVisibleForTestingOnly?: boolean;\n\n  /**\n   * Relaxed is intended for when your tooltip has a header and you need some\n   * more space\n   */\n  padding?: \"normal\" | \"relaxed\";\n\n  /**\n   * Indicates that the popup list should match the width of the trigger\n   * compoonent\n   *\n   * @default false\n   */\n  matchTriggerWidth?: boolean;\n}\n\ntype Props = TippyProps &\n  AbstractTooltipProps &\n  ({ visible?: undefined } | { visible: boolean; trigger?: undefined });\n\nexport const AbstractTooltip: React.FC<Props> = ({\n  animation = \"shift-away\",\n  children,\n  className,\n  fallbackPlacements,\n  forceVisibleForTestingOnly,\n  padding = \"normal\",\n  trigger,\n  hideOnClick,\n  matchTriggerWidth = false,\n  popperOptions = {},\n  visible,\n  ...props\n}) => {\n  const {\n    disableAnimations: disableAnimationsFromProvider,\n  } = useSpaceKitProvider();\n  const disableAnimations =\n    disableAnimationsFromProvider || forceVisibleForTestingOnly;\n\n  return (\n    <>\n      <TippyStyles />\n      <Tippy\n        animation={disableAnimations ? false : animation}\n        arrow={false}\n        hideOnClick={forceVisibleForTestingOnly ? false : hideOnClick}\n        trigger={forceVisibleForTestingOnly ? \"manual\" : trigger}\n        visible={forceVisibleForTestingOnly ? true : visible}\n        theme=\"space-kit\"\n        popperOptions={{\n          ...popperOptions,\n          modifiers: [\n            {\n              name: \"computeStyles\",\n              options: {\n                gpuAcceleration: false,\n              },\n            },\n            {\n              name: \"flip\",\n              options: {\n                fallbackPlacements,\n              },\n            },\n            {\n              ...matchTriggerWidthModifier,\n              enabled: matchTriggerWidth,\n            },\n            // This must be at the end because later modifiers override earlier\n            // ones. @see\n            // https://popper.js.org/docs/v2/faq/#how-do-i-set-modifier-defaults-and-allow-them-to-be-overridden\n            ...(popperOptions.modifiers || []),\n          ],\n        }}\n        {...props}\n        className={classnames(className, {\n          \"space-kit-relaxed\": padding === \"relaxed\",\n        })}\n      >\n        {children}\n      </Tippy>\n    </>\n  );\n};\n"],"names":["TippyStyles","React","SingletonComponent","identity","useMemo","Global","styles","css","base","backgroundColor","colors","black","opacity","borderTopColor","borderBottomColor","borderRightColor","borderLeftColor","padding","matchTriggerWidth","name","enabled","phase","requires","requiresIfExists","fn","_a","state","popper","width","rects","reference","effect","elements","style","offsetWidth","tippyBox","querySelector","minWidth","AbstractTooltip","_b","animation","children","className","fallbackPlacements","forceVisibleForTestingOnly","_c","trigger","hideOnClick","_d","_e","popperOptions","visible","props","disableAnimationsFromProvider","useSpaceKitProvider","disableAnimations","Tippy","arrow","theme","modifiers","options","gpuAcceleration","matchTriggerWidthModifier","classnames"],"mappings":"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"}